# ==========================================================
# SERVER CONFIGURATION
# ==========================================================
server.port=9090
spring.thymeleaf.cache=false

# ==========================================================
# POSTGRES DATABASE (PORT 5433)
# ==========================================================
spring.jpa.database-platform=postgres
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.datasource.url=jdbc:postgresql://localhost:5433/elfatoora_portal
spring.datasource.username=zedgres
spring.datasource.password=zedgres
spring.jpa.hibernate.ddl-auto=none
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.show-sql=true

# HIKARI CONNECTION POOL
spring.datasource.hikari.connection-timeout=60000
spring.datasource.hikari.maximum-pool-size=5

# ==========================================================
# MOBILE ID (TUNTRUST OIDC)
# ==========================================================
oidc.url.authorize=https://tuntrust-auth.mobile-id.tn/oauth2/authorize
oidc.url.get-token=https://tuntrust-auth.mobile-id.tn/oauth2/token
oidc.url.user-info=https://tuntrust-auth.mobile-id.tn/userinfo
oidc.url.logout=https://tuntrust-auth.mobile-id.tn/connect/logout

oidc.client-id=4199829511
oidc.client-secret=464069
oidc.grant-type=authorization_code
oidc.scopes=openid profile email phone identity
oidc.redirect-uri=/sign-in/callback
oidc.code-challenge-method=S256
oidc.ssl.insecure=false

app.public-base-url=http://localhost:9090

# ==========================================================
# FILE UPLOAD & COMPRESSION
# ==========================================================
piece.upload.max-file-size=1MB
spring.servlet.multipart.max-file-size=1MB
spring.servlet.multipart.max-request-size=10MB

server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json,application/xml,font/woff2
server.compression.min-response-size=2048

# STATIC RESOURCES CACHE (1 YEAR)
spring.web.resources.cache.period=31536000
spring.web.resources.chain.cache=true
spring.web.resources.chain.strategy.content.enabled=true
spring.web.resources.chain.strategy.content.paths=/**

# ==========================================================
# MINIO STORAGE (DEV)
# ==========================================================
minio.url=http://localhost:9000
minio.accessKey=minioadmin
minio.secretKey=minioadmin
minio.bucket=elfatoora-adhesion
# -------------------------

# MinIO PROD

# -------------------------
#minio.url=http://192.168.2.91:9000
#minio.accessKey=TTN2026$*!
#minio.secretKey=TTN2026$*!
#minio.bucket=elfatoora-adhesion
# ==========================================================
# REDIS CONFIGURATION (WSL2)
# ==========================================================
spring.data.redis.host=127.0.0.1
spring.data.redis.port=6379
spring.data.redis.password=WYZ25072009
spring.data.redis.timeout=2000

# LETTUCE POOL SETTINGS
spring.redis.lettuce.pool.max-active=20
spring.redis.lettuce.pool.max-idle=10
spring.redis.lettuce.shutdown-timeout=200ms

# ==========================================================
# OTP SETTINGS
# ==========================================================
app.otp.length=6
app.otp.ttl.minutes=10
app.otp.max.attempts=5

# ==========================================================
# MAIL CONFIGURATION (SMTP)
# ==========================================================
spring.mail.host=smtp.orange.tn
spring.mail.port=587
spring.mail.username=noreply@elfatoora.tn
spring.mail.password=BMf6n08B-hJC
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.ssl.trust=smtp.orange.tn
spring.mail.properties.mail.smtp.starttls.required=true
app.mail.from=noreply@elfatoora.tn
app.mail.subject.prefix=[El Fatoora]
# ==========================================================
# SMS OTP CONFIGURATION (WBM.TN)
# ==========================================================
app.sms.api-key=28a6f75d42a91088b5eb2444f42479c7
app.sms.api-url=https://wbm.tn/wbmonitor/send/webapi/v5/send_generic
# ==========================================================
# MONITORING & ACTUATOR
# ==========================================================
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always
management.health.redis.enabled=true

# ADMIN CREDENTIALS FOR MONITORING ACTUATOR
spring.security.user.name=admin@fatoora.tn
spring.security.user.password=@gent123TTNO!
spring.security.user.roles=ADMIN

# ==========================================================
# LOGGING & ERRORS
# ==========================================================
logging.level.com.sun.mail=DEBUG
spring.mail.properties.mail.debug=true
logging.level.org.springframework.security=INFO
logging.level.org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping=DEBUG

server.error.whitelabel.enabled=false
server.error.include-message=never
server.error.include-binding-errors=never
server.error.include-stacktrace=never
server.error.include-exception=false